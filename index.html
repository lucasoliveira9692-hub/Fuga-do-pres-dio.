<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Fuga do Presídio</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { background:#111; color:#fff; font-family:Arial; margin:0; text-align:center;}
    h1{margin:16px 0}
    #gameArea{margin:20px auto;width:90%;height:400px;border:3px solid #fff;background:#222;display:flex;align-items:center;justify-content:center}
    #status{color:#bbb}
    #error{color:#ff6b6b;display:none;margin-top:8px}
  </style>
</head>
<body>
  <h1>Fuga do Presídio</h1>
  <div id="gameArea">
    <div>
      <div id="status">Carregando jogo...</div>
      <div id="error"></div>
    </div>
  </div>

  <script>
    // 1) remover SWs instalados no navegador do usuário (temporário)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(regs => {
        regs.forEach(r => r.unregister().catch(()=>{}));
      }).catch(()=>{});
    }

    // 2) carregar script com cache-bust (ajuste o nome se o seu arquivo for 'game.js')
    (function(){
      var s = document.createElement('script');
      s.src = 'jogo.js?v=' + Date.now();
      s.defer = true;
      s.onload = function(){ document.getElementById('status').textContent = 'Jogo carregado — iniciando...'; };
      s.onerror = function(){ showErr('Falha ao carregar jogo.js — verifique se o arquivo existe com este nome'); };
      document.head.appendChild(s);
      // timeout: se não inicializar, mostra erro
      setTimeout(function(){
        if(!window.__lcgame_loaded) showErr('Tempo esgotado: script não inicializou. Abra em anônimo ou verifique console.');
      },7000);
    })();

    function showErr(msg){
      console.error(msg);
      document.getElementById('status').style.display = 'none';
      var e = document.getElementById('error'); e.style.display = 'block'; e.textContent = msg;
    }

    window.addEventListener('error', function(ev){ showErr('Erro JS: ' + (ev.message || ev.filename || ev)); });
  </script>
</body>
</html>
